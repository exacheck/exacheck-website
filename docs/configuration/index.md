---
icon: material/cog
---

# Configuration

ExaCheck reads from a YAML or JSON configuration file containing the list of checks. By default, the configuration file will be loaded from `/etc/exabgp/exacheck.yaml`. If the configuration file extension is `json`, the file will be loaded as a JSON file rather than YAML.

## Base Structure

A (minimal) configuration schema looks like this:

```yaml
---

# The list of health checks
checks:

--8<--
examples/checks/dns/basic.md
--8<--

# An optional list of notification targets
notifications:

--8<--
examples/notifications/teams.md
--8<--
```

## Configuration Keys

The following top level configuration keys are available:

| Key                                           | Type                           | Default |
| --------------------------------------------- | ------------------------------ | ------- |
| [`checks`](#checks)                           | List[Check]                    | *undef* |
| [`logging`](#logging)                         | *Optional* List[LogMethods]    | *undef* |
| [`notifications`](#notifications)             | *Optional* List[Notifications] | *undef* |
| [`sentry`](#sentry)                           | *Optional* Dict                | *undef* |
| [`live_reload`](#live-reload)                 | Bool                           | `False` |
| [`monitoring_interval`](#monitoring-interval) | Float/Int                      | `30`    |

### Checks

The `checks` key contains a list of the health checks that should be executed. For the configuration of individual checks see the [health checks configuration page][ExaCheck Configuration - Health Checks].

### Logging

The `logs` key contains a list of log targets. These may be file based or remote syslog (UDP/TCP) servers. For configuration options see the [logging configuration page][ExaCheck Configuration - Logging].

### Notifications

The `notifications` key contains a list of notification targets. See the [notifications configuration page][ExaCheck Configuration - Notifications].

### Sentry

Sentry error reporting/profiling can be configured with the `sentry` key. See the [Sentry configuration page][ExaCheck Configuration - Sentry].

### Live Reload

Live configuration reloads may be enabled by setting `live_reload` to `True`. See the [live configuration reload page][ExaCheck Configuration - Live Reload].

### Monitoring Interval

The `monitoring_interval` option controls how often the master process checks for configuration modifications (if enabled) and that each health check process is running. If a health check process is terminated for some reason (eg. an unhandled exception) the master process will automatically respawn it at the next monitoring interval.

The default value of `30` should be fine for most use cases. Note that this value is NOT how often a health check is executed; that is controlled at the health check level.

#### Monitoring Interval Example

To change the monitoring interval from the default 30 seconds to 60 seconds:

```yaml
---

# Enable live configuration reloads
live_reload: true

# Monitor for configuration changes and verify the health check processes are running every 60 seconds
monitoring_interval: 60

--8<--
examples/check_footer.md
--8<--
```

## Validation

The configuration file is validated using [Pydantic][Pydantic Homepage]. The configuration file is parsed into a dictionary from YAML or JSON which is then loaded into the Pydantic model.

Validation is as strict as possible while also being safe - ExaCheck will not start if the configuration is invalid and live reloads are skipped if the configuration becomes invalid.

## Configuration Schema

A JSON schema for the configuration is available in [schema.json][ExaCheck Configuration Schema]. Alternatively the schema can be generated by the [command line interface][ExaCheck CLI - Configuration Schema] directly.

The JSON schema can be used by certain IDEs (VS Code as an example) to validate the configuration as you edit it. It can also be used to visualize the list of available options using a tool such as [JSON Crack][JSON Crack Editor].

### VS Code

If using VS Code with the [YAML Language Server][YAML Language Server] the following header may be set in the configuration file:

```yaml
---
# yaml-language-server: $schema=https://raw.githubusercontent.com/exacheck/exacheck/main/schema.json
```

[ExaCheck CLI - Configuration Schema]: ../features/cli.md#configuration-schema
[ExaCheck Configuration Schema]: https://github.com/exacheck/exacheck/blob/main/schema.json
[ExaCheck Configuration - Live Reload]: live-reload.md
[ExaCheck Configuration - Logging]: logging/index.md
[ExaCheck Configuration - Notifications]: notifications.md
[ExaCheck Configuration - Health Checks]: health-checks/index.md
[ExaCheck Configuration - Sentry]: sentry.md
[Pydantic Homepage]: https://docs.pydantic.dev/latest/
[YAML Language Server]: https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml
[JSON Crack Editor]: https://jsoncrack.com/editor
